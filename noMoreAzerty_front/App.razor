<CascadingAuthenticationState>
    <ErrorBoundary>
        <ChildContent>
            <Router AppAssembly="@typeof(App).Assembly">
                <Found Context="routeData">
                    <AuthorizeRouteView RouteData="@routeData"
                                        DefaultLayout="@typeof(MainLayout)">
                        <NotAuthorized>
                            @if (context.User.Identity?.IsAuthenticated != true)
                            {
                                <RedirectToLogin />
                            }
                            else
                            {
                                <MudAlert Severity="Severity.Error">
                                    Vous n’êtes pas autorisé à accéder à cette ressource.
                                </MudAlert>
                            }
                        </NotAuthorized>
                    </AuthorizeRouteView>
                </Found>

                <NotFound>
                    <LayoutView Layout="@typeof(MainLayout)">
                        <MudText Typo="Typo.h6">
                            Page introuvable
                        </MudText>
                    </LayoutView>
                </NotFound>
            </Router>
        </ChildContent>

        <ErrorContent Context="exception">
            <LayoutView Layout="@typeof(MainLayout)">
                <MudAlert Severity="Severity.Error" Elevation="2">
                    Une erreur critique est survenue.
                </MudAlert>
            </LayoutView>
        </ErrorContent>
    </ErrorBoundary>
</CascadingAuthenticationState>
