@inject NavigationManager Navigation
@inject VaultService VaultService

<MudDialog>
    <TitleContent>Enter Password</TitleContent>
    <DialogContent>
        <MudTextField Variant="Variant.Outlined"
                      Margin="Margin.Dense" 
                      Label="Password" 
                      @bind-Value="Password" 
                      InputType="InputType.Password" 
                      Required="true" />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Submit" Color="Color.Primary" Variant="Variant.Filled">Submit</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; } = default!;
    [Parameter] public VaultService.Vault Vault { get; set; } = default!;

    private string Password { get; set; } = string.Empty;

    private void Submit()
    {
        // TODO : Appel API avec le password et le vault Id en param

        // Si retour ok on redirige

        // Logique pour vérifier le mot de passe (à implémenter)
        if (Password == "test")
        {
            VaultService.CurrentVault = Vault;
            Navigation.NavigateTo("/vaults/" + Vault.Id);
        }

        MudDialog.Close();
    }

    private void Cancel()
    {
        MudDialog.Cancel();
    }
}